<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Prism Audio - Home</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
      body.products-page { background:linear-gradient(180deg,#faf7f4,#f3efe9); color:#1a1a1a; font-family:Inter,system-ui,sans-serif; }
      nav { background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(250,247,244,0.98)); border-bottom:1px solid rgba(139,90,65,0.1); box-shadow:0 4px 16px rgba(26,26,26,0.04); backdrop-filter:blur(10px) saturate(120%); display:flex; justify-content:center; align-items:center; padding:1.25rem 3rem; position:fixed; top:0; left:0; right:0; width:100%; z-index:100; }
      .logo { color:#111; font-weight:700; letter-spacing:1px; font-size:1.3rem; }
      .menu-toggle { position:fixed; top:1.5rem; right:3rem; z-index:1001; background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1); padding:12px; border-radius:8px; cursor:pointer; transition:.3s; display:flex; flex-direction:column; gap:5px; width:40px; height:40px; justify-content:center; align-items:center; }
      .menu-toggle span { width:24px; height:2px; background:#111; transition:.3s; border-radius:2px; }
      .menu-toggle:hover { transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.1); }
      .menu-toggle.active span:nth-child(1){ transform:rotate(45deg) translate(6px,6px); }
      .menu-toggle.active span:nth-child(2){ opacity:0; }
      .menu-toggle.active span:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px); }
      .nav-links { position:fixed; top:0; right:-350px; width:350px; height:100vh; background:rgba(255,255,255,0.98); backdrop-filter:blur(20px); box-shadow:-4px 0 24px rgba(0,0,0,0.1); z-index:1000; transition:right .4s cubic-bezier(.4,0,.2,1); display:flex; flex-direction:column; padding:100px 40px 40px; gap:8px; }
      .nav-links.active { right:0; }
      .nav-links a { color:rgba(20,20,20,0.7); text-decoration:none; padding:16px 20px; border-radius:8px; transition:.3s; font-size:1.1rem; font-weight:500; }
      .nav-links a:hover { color:#111; background:rgba(17,17,17,0.05); transform:translateX(-4px); }
      .nav-links a.login-cta { background:#111; color:#fff; font-weight:600; text-decoration:none; padding:16px 20px; border-radius:12px; border:1px solid rgba(0,0,0,0.5); font-size:1.05rem; letter-spacing:.25px; box-shadow:0 2px 6px rgba(0,0,0,0.12); transition:.25s; }
      .nav-links a.login-cta:hover { background:#000; border-color:#000; box-shadow:0 4px 14px rgba(0,0,0,0.18); transform:translateX(-4px); }
      #darkModeToggle { background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1); padding:12px 20px; border-radius:8px; cursor:pointer; color:#111; font-weight:600; margin-top:20px; transition:.3s; font-size:1.1rem; text-align:left; }
      #darkModeToggle:hover { background:rgba(17,17,17,0.12); transform:translateX(-4px); }
      .menu-overlay { position:fixed; top:0; left:0; width:100%; height:100vh; background:rgba(0,0,0,0); z-index:999; pointer-events:none; transition:background .4s; }
      .menu-overlay.active { background:rgba(0,0,0,0.3); pointer-events:all; }
      /* Dark mode */
      body.dark-mode { background:linear-gradient(180deg,#1a1a1a,#0f0f0f)!important; color:#e0e0e0!important; }
      body.dark-mode nav { background:linear-gradient(180deg,rgba(30,30,30,0.95),rgba(20,20,20,0.98))!important; border-bottom:1px solid rgba(255,255,255,0.1)!important; }
      body.dark-mode .menu-toggle { background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.2); }
      body.dark-mode .menu-toggle span { background:#fff; }
      body.dark-mode .nav-links { background:rgba(30,30,30,0.98); box-shadow:-4px 0 24px rgba(0,0,0,0.5); }
      body.dark-mode .nav-links a { color:rgba(255,255,255,0.7)!important; }
      body.dark-mode .nav-links a:hover { color:#fff!important; background:rgba(255,255,255,0.1); }
      body.dark-mode .nav-links a.login-cta { background:#fff!important; color:#111!important; border:1px solid rgba(255,255,255,0.25); box-shadow:0 2px 10px rgba(0,0,0,0.55); }
      body.dark-mode .nav-links a.login-cta:hover { background:#fff!important; color:#111!important; border-color:rgba(255,255,255,0.45); box-shadow:0 6px 18px rgba(0,0,0,0.7); }
      body.dark-mode #darkModeToggle { background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.2); color:#fff; }
      body.dark-mode #darkModeToggle:hover { background:rgba(255,255,255,0.2); }
      /* Keep existing index-specific section/card styles below */
      .products-container { max-width:1200px; margin:120px auto 80px; padding:0 20px; }
      
      .page-hero {
          display:flex;
          align-items:center;
          justify-content:space-between;
          gap:24px;
          margin-bottom:28px;
      }
      .hero-copy { max-width:660px; }
      .hero-copy h1 {
          font-family: 'Playfair Display', serif;
          font-size:2.6rem;
          margin:0 0 10px 0;
          color:#0f0f0f;
          line-height:1.02;
      }
      .hero-copy p { color: #5b5b5b; margin-bottom:14px; font-size:1.05rem; }
      .hero-actions { display:flex; gap:12px; align-items:center; }

      .cta-primary {
          background: #111;
          color:#fff;
          padding:10px 16px;
          border-radius:8px;
          text-decoration:none;
          font-weight:600;
          transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .cta-primary:hover {
          transform: translateY(-3px);
          box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      }
      
      .cta-ghost {
          background: transparent;
          border: 1px solid rgba(17,17,17,0.08);
          color:#111;
          padding:10px 16px;
          border-radius:8px;
          text-decoration:none;
          transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      }
      .cta-ghost:hover {
          transform: translateY(-3px);
          box-shadow: 0 6px 16px rgba(0,0,0,0.08);
          border-color: rgba(17,17,17,0.15);
      }

      .search-bar {
          background:#fff;
          border-radius:10px;
          padding:10px 12px;
          box-shadow: 0 8px 24px rgba(10,10,10,0.04);
          display:flex;
          gap:8px;
          align-items:center;
          min-width:260px;
      }
      .search-bar input { border:0; outline:0; background:transparent; font-size:0.95rem; color:#1a1a1a; width:100%; }

      /* Horizontal category panels */
      .category-panel { 
          overflow:hidden; 
          border-radius:12px; 
          padding:0; 
          display:block;
          background: #fff;
          box-shadow: 0 10px 30px rgba(20,20,20,0.06);
          border: 1px solid rgba(0,0,0,0.06);
      }
      .category-inner { display:grid; grid-template-columns:repeat(2,1fr); gap:0; align-items:stretch; }
      .category-media { min-height:420px; background:#f6f6f6; display:flex; align-items:center; justify-content:center; }
      .category-content { 
          padding:48px 44px; 
          display:flex; 
          flex-direction:column; 
          gap:18px; 
          justify-content:center;
          background: #fff;
      }

      /* Featured grid (small samples row) */
      .featured-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1.25rem; margin-top:1rem; }
      .featured-card {
          border-radius:10px; 
          overflow:hidden; 
          background: #fff;
          border:1px solid rgba(0,0,0,0.06);
          box-shadow: 0 10px 30px rgba(20,20,20,0.06);
          transition: transform .18s ease, box-shadow .18s ease;
      }
      .featured-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 16px 40px rgba(20,20,20,0.08);
      }
      .featured-card img { width:100%; height:180px; object-fit:cover; display:block; }
      .featured-card .card-body { padding:16px 18px; }
      .featured-card h3 { margin-bottom:6px; font-size:1.05rem; color:#111; font-weight:600; }
      .featured-card p { color:#6b6b6b; font-size:0.95rem; }
      .featured-card .kv {
          display:flex;
          align-items:center;
          justify-content:space-between;
          margin-top:10px;
      }
      .featured-card .tag {
          background: linear-gradient(180deg, #fafafa, #f6f6f6);
          border: 1px solid rgba(0,0,0,0.04);
          padding:4px 10px;
          border-radius:6px;
          font-size:0.85rem;
          color:#5b5b5b;
      }

      @media (max-width:900px){
          .page-hero { flex-direction:column; align-items:flex-start; gap:16px; }
          .category-inner { grid-template-columns: 1fr; }
          .category-media { min-height:240px; }
      }

      /* Dark Mode Styles */
      body.dark-mode {
          background: linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%) !important;
          color: #e0e0e0 !important;
      }
      
      body.dark-mode nav {
          background: linear-gradient(180deg, rgba(30,30,30,0.95) 0%, rgba(20,20,20,0.98) 100%) !important;
          border-bottom: 1px solid rgba(255,255,255,0.1) !important;
      }
      
      body.dark-mode .logo,
      body.dark-mode .nav-links a,
      body.dark-mode .hero-copy h1,
      body.dark-mode .hero-copy p,
      body.dark-mode h2,
      body.dark-mode h3 {
          color: #e0e0e0 !important;
      }
      
      body.dark-mode .nav-links a {
          color: rgba(255,255,255,0.7) !important;
      }
      
      body.dark-mode .nav-links a:hover {
          color: #fff !important;
      }
      
      body.dark-mode .cta-primary {
          background: #fff !important;
          color: #111 !important;
      }
      
      body.dark-mode .cta-ghost {
          border: 1px solid rgba(255,255,255,0.2) !important;
          color: #e0e0e0 !important;
      }
      
      body.dark-mode .search-bar {
          background: rgba(40,40,40,0.9) !important;
          box-shadow: 0 8px 24px rgba(0,0,0,0.4) !important;
      }
      
      body.dark-mode .search-bar input {
          color: #e0e0e0 !important;
      }
      
      body.dark-mode .category-panel,
      body.dark-mode .featured-card {
          background: rgba(30,30,30,0.8) !important;
          border: 1px solid rgba(255,255,255,0.1) !important;
          box-shadow: 0 10px 30px rgba(0,0,0,0.5) !important;
      }
      
      body.dark-mode .category-content {
          background: rgba(30,30,30,0.8) !important;
      }
      
      body.dark-mode .category-media {
          background: rgba(20,20,20,0.8) !important;
      }
      
      body.dark-mode .featured-card h3,
      body.dark-mode .featured-card p {
          color: #e0e0e0 !important;
      }
      
      body.dark-mode .featured-card .tag {
          background: rgba(50,50,50,0.8) !important;
          color: #b0b0b0 !important;
          border: 1px solid rgba(255,255,255,0.1) !important;
      }

      .featured-card { position:relative; }
      .featured-card .card-link,
      .category-panel .sample-link {
          position:absolute;
          inset:0;
          z-index:5;
          text-indent:-9999px;
      }
      .featured-card .kv,
      .featured-card .card-body,
      .category-panel .category-content { position:relative; z-index:6; }
    </style>
</head>
<body class="products-page">
    <nav><div class="logo">PRISM AUDIO</div></nav>
    <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="nav-links" id="navMenu">
      <a href="{{ url_for('home') }}">Home</a>
      <a href="{{ url_for('products') }}">Products</a>
      <a href="{{ url_for('turntables') }}">Turntables</a>
      <a href="{{ url_for('speakers') }}">Speakers</a>
      <a href="{{ url_for('amplifiers') }}">Amplifiers</a>
      <a href="{{ url_for('about') }}">About</a>
      <a href="{{ url_for('cart') }}">Cart ({{ cart_count }})</a>
      <button id="darkModeToggle">☾ Dark Mode</button>
      <div style="flex:1;"></div>
      {% if session.get('user_id') %}
        <a href="{{ url_for('account') }}">My Account</a>
        <a href="{{ url_for('logout') }}">Log out</a>
      {% else %}
        <a class="login-cta" href="{{ url_for('login') }}">Log in</a>
        <a href="{{ url_for('signup') }}">Sign up</a>
      {% endif %}
    </div>

    <main class="products-container container">
        <header class="page-hero">
            <div class="hero-copy">
                <h1>Essential Accessories<br><span style="font-weight:400; color:#6b6b6b; font-size:1.05rem;">Precision parts and care kits for discerning listeners</span></h1>
                <p>Curated collection of turntables, speakers and amplifiers. Photography-led presentation and refined details for confident buying.</p>
                <div class="hero-actions">
                    <a class="cta-primary" href="{{ url_for('products') }}">Shop all</a>
                    <a class="cta-ghost" href="{{ url_for('about') }}">About</a>
                </div>
            </div>
        </header>

        {# Horizontal category sections (alternating image / text) #}
        {% set sections = [("Turntables","Turntable","turntables"),
                          ("Speakers","Speaker","speakers"),
                          ("Amplifiers","Amplifier","amplifiers")] %}
        {% set hero_map = {
          'Turntables': url_for('static', filename='images/turntables-hero.jpg'),
          'Speakers': url_for('static', filename='images/speaker-hero.jpg'),
          'Amplifiers': url_for('static', filename='images/amplifier-hero.jpg')
        } %}
        <section style="display:flex; flex-direction:column; gap:36px; margin-bottom:40px;">
          {% for title, key, route in sections %}
            {% set item = samples.get(key) %}
            {% set hero = hero_map.get(title) %}
            <section class="category-panel">
              <div class="category-inner">
                {% if loop.index is odd %}
                  <div class="category-media">
                    {% if hero %}
                      <img src="{{ hero }}" alt="{{ title }} hero" style="width:100%; height:100%; object-fit:cover; display:block;">
                    {% elif item %}
                      <a class="sample-link" href="{{ url_for('product_detail', product_id=item.id) }}" aria-label="View {{ item.name }}"></a>
                      <img src="{{ item.image }}" alt="{{ item.name }}" style="width:100%; height:100%; object-fit:cover; display:block;">
                    {% else %}
                      <div style="padding:28px; color:#6b6b6b;">No sample available</div>
                    {% endif %}
                  </div>
                  <div class="category-content">
                    <h2 style="font-family:'Playfair Display',serif; font-size:2rem; margin:0;">{{ title }}</h2>
                    <p style="color:#6b6b6b; margin:0; max-width:62ch;">
                      {% if item %}{{ item.description }}{% else %}Explore our {{ title|lower() }} collection.{% endif %}
                    </p>
                    <div style="display:flex; gap:12px; margin-top:6px;">
                      <a class="cta-primary" href="{{ url_for(route) }}">Browse {{ title }}</a>
                    </div>
                  </div>
                {% else %}
                  <div class="category-content">
                    <h2 style="font-family:'Playfair Display',serif; font-size:2rem; margin:0;">{{ title }}</h2>
                    <p style="color:#6b6b6b; margin:0; max-width:62ch;">
                      {% if item %}{{ item.description }}{% else %}Explore our {{ title|lower() }} collection.{% endif %}
                    </p>
                    <div style="display:flex; gap:12px; margin-top:6px;">
                      <a class="cta-primary" href="{{ url_for(route) }}">Browse {{ title }}</a>
                      {% if item and not hero %}
                        <a class="cta-ghost" href="{{ url_for(route) }}#product-{{ item.id }}">View sample</a>
                      {% endif %}
                    </div>
                  </div>
                  <div class="category-media">
                    {% if hero %}
                      <img src="{{ hero }}" alt="{{ title }} hero" style="width:100%; height:100%; object-fit:cover; display:block;">
                    {% elif item %}
                      <a class="sample-link" href="{{ url_for('product_detail', product_id=item.id) }}" aria-label="View {{ item.name }}"></a>
                      <img src="{{ item.image }}" alt="{{ item.name }}" style="width:100%; height:100%; object-fit:cover; display:block;">
                    {% else %}
                      <div style="padding:28px; color:#6b6b6b;">No sample available</div>
                    {% endif %}
                  </div>
                {% endif %}
              </div>
            </section>
          {% endfor %}
        </section>

        {# Quick samples grid similar to products page #}
        <section class="section">
            <h3 style="margin-bottom:10px;">Quick samples</h3>
            <div class="featured-grid">
                {% for key, item in samples.items() %}
                    {% if item %}
                    <article class="featured-card panel" style="min-height:180px;">
                        <a class="card-link" href="{{ url_for('product_detail', product_id=item.id) }}" aria-label="View {{ item.name }}"></a>
                        <img src="{{ item.image }}" alt="{{ item.name }}">
                        <div class="card-body">
                            <h3>{{ item.name }}</h3>
                            <p style="margin-bottom:8px; color:#6b6b6b; font-size:0.95rem;">{{ item.description }}</p>
                            <div class="kv">
                                <span class="tag">{{ key }}</span>
                                <span style="margin-left:auto; font-weight:700;">${{ '%.2f'|format(item.price) }}</span>
                            </div>
                        </div>
                    </article>
                    {% endif %}
                {% endfor %}
            </div>
        </section>
    </main>
    
    <script>
      const menuToggle=document.getElementById('menuToggle');
      const navMenu=document.getElementById('navMenu');
      const menuOverlay=document.getElementById('menuOverlay');
      const toggle=document.getElementById('darkModeToggle');
      const body=document.body;
      menuToggle.addEventListener('click',()=>{menuToggle.classList.toggle('active');navMenu.classList.toggle('active');menuOverlay.classList.toggle('active');});
      menuOverlay.addEventListener('click',()=>{menuToggle.classList.remove('active');navMenu.classList.remove('active');menuOverlay.classList.remove('active');});
      navMenu.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{menuToggle.classList.remove('active');navMenu.classList.remove('active');menuOverlay.classList.remove('active');}));
      if(localStorage.getItem('darkMode')==='enabled'){enableDarkMode();}
      toggle.addEventListener('click',()=>{body.classList.contains('dark-mode')?disableDarkMode():enableDarkMode();});
      function enableDarkMode(){ body.classList.add('dark-mode'); toggle.textContent='☀ Light Mode'; localStorage.setItem('darkMode','enabled'); }
      function disableDarkMode(){ body.classList.remove('dark-mode'); toggle.textContent='☾ Dark Mode'; localStorage.removeItem('darkMode'); }
    </script>
</body>
</html>