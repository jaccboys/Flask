<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Speakers — Prism Audio</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700&display=swap" rel="stylesheet">
<!-- Add this to the <head> section of your HTML templates -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#ff864c">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<style>
:root { --accent:#ff864c; }
body.products-page { background:linear-gradient(180deg,#faf7f4,#f3efe9); color:#1a1a1a; font-family:Inter,system-ui,sans-serif; }
nav { background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(250,247,244,0.98)); border-bottom:1px solid rgba(139,90,65,0.1); box-shadow:0 4px 16px rgba(26,26,26,0.04); backdrop-filter:blur(10px) saturate(120%); display:flex; justify-content:center; align-items:center; padding:1.25rem 3rem; position:fixed; top:0; left:0; right:0; width:100%; z-index:100; }
.logo { 
  font-family: "Plus Jakarta Sans", Inter, "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-weight: 600;
  letter-spacing: .25px;
  font-size: 1.3rem;
  -webkit-font-smoothing: antialiased;
}

/* Hero (constrained to grid width) */
.hero-container { max-width:1200px; padding:0 2rem; margin:110px auto 50px; }
.hero-image {
  width:100%; aspect-ratio:16/5;
  background:url('{{ url_for("static", filename="images/speakerheader1.jpg") }}') center/cover no-repeat;
  border-radius:48px; position:relative; overflow:hidden;
}
.hero-image::before {
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg,rgba(0,0,0,0.60) 0%,rgba(0,0,0,0.42) 45%,rgba(0,0,0,0.22) 70%,rgba(0,0,0,0.10) 100%);
}
.hero-content {
  position:absolute; top:50%; left:5%; transform:translateY(-50%);
  max-width:560px; display:flex; flex-direction:column; gap:18px; color:#fff;
}
.hero-content h1 { 
  font-family:"Plus Jakarta Sans",Inter,"Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size:clamp(2.2rem,5vw,3.3rem); 
  line-height:1.02; 
  margin:0;
  font-weight:600;
  letter-spacing:.25px;
  -webkit-font-smoothing:antialiased;
}
.hero-content h1 .accent { background:linear-gradient(90deg,var(--accent),#ffa97c); -webkit-background-clip:text; background-clip:text; color:transparent; }
.hero-content p { font-size:clamp(1rem,1.15vw,1.25rem); line-height:1.3; margin:0; }
.hero-cta {
  display:inline-block; background:rgba(255,255,255,0.10); border:1px solid rgba(255,255,255,0.45);
  color:#fff; text-decoration:none; font-weight:600; padding:10px 20px; border-radius:12px;
  font-size:.85rem; letter-spacing:.5px; backdrop-filter:blur(4px); transition:.25s;
}
.hero-cta:hover { background:var(--accent); border-color:var(--accent); color:#111; transform:translateY(-2px); }
@media (max-width:900px){
  .hero-container{margin:100px auto 40px; padding:0 1.5rem;}
  .hero-image{aspect-ratio:16/8; border-radius:34px;}
}

/* Menu */
.menu-toggle { position:fixed; top:1.5rem; right:3rem; z-index:1001; background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1); padding:12px; border-radius:8px; cursor:pointer; display:flex; flex-direction:column; gap:5px; width:40px; height:40px; justify-content:center; align-items:center; transition:.3s; }
.menu-toggle span { width:24px; height:2px; background:#111; border-radius:2px; transition:.3s; }
.menu-toggle.active span:nth-child(1){ transform:rotate(45deg) translate(6px,6px); }
.menu-toggle.active span:nth-child(2){ opacity:0; }
.menu-toggle.active span:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px); }
.nav-links { position:fixed; top:0; right:-350px; width:350px; height:100vh; background:rgba(255,255,255,0.98); backdrop-filter:blur(20px); box-shadow:-4px 0 24px rgba(0,0,0,0.1); z-index:1000; transition:right .4s cubic-bezier(.4,0,.2,1); display:flex; flex-direction:column; padding:100px 40px 40px; gap:8px; }
.nav-links.active { right:0; }
.nav-links a { color:rgba(20,20,20,0.7); text-decoration:none; padding:16px 20px; border-radius:8px; transition:.3s; font-size:1.05rem; font-weight:500; }
.nav-links a:hover { color:#111; background:rgba(17,17,17,0.05); transform:translateX(-4px); }
#darkModeToggle { background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1); padding:12px 20px; border-radius:8px; cursor:pointer; color:#111; font-weight:600; margin-top:20px; font-size:1.05rem; text-align:left; transition:.3s; }
#darkModeToggle:hover { background:rgba(17,17,17,0.12); transform:translateX(-4px); }
.menu-overlay { position:fixed; top:0; left:0; width:100%; height:100vh; background:rgba(0,0,0,0); pointer-events:none; transition:background .4s; z-index:999; }
.menu-overlay.active { background:rgba(0,0,0,0.3); pointer-events:all; }

/* Grid */
.page { max-width:1200px; margin:0 auto 70px; padding:0 2rem; }
.product-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:22px; margin-top:10px; }
.product-card { background:#fff; border-radius:12px; overflow:hidden; display:flex; flex-direction:column; box-shadow:0 10px 30px rgba(20,20,20,0.06); transition:.18s; border:1px solid rgba(0,0,0,0.06); }
.product-card:hover { transform:translateY(-6px); box-shadow:0 18px 46px rgba(18,18,18,0.08); border-color:var(--accent); }
.product-media { width:100%; height:300px; object-fit:cover; background:#f6f6f6; }
.product-body { padding:18px 20px; display:flex; flex-direction:column; gap:10px; flex:1; }
.product-title { font-family:'Playfair Display',serif; font-size:1.15rem; margin:0; color:#111; }
.product-meta { color:#6b6b6b; font-size:0.85rem; letter-spacing:.5px; text-transform:uppercase; }
.product-desc { 
    color:#5c5c5c; 
    font-size:0.9rem; 
    flex:1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.4;
    max-height: calc(1.4em * 3); /* 3 lines */
  }
.product-footer { display:flex; justify-content:space-between; align-items:center; margin-top:auto; gap:10px; }
.price { font-weight:700; color:var(--accent); }
.btn-details, .btn-cart { background:#111; color:#fff; text-decoration:none; padding:8px 14px; border-radius:8px; font-size:0.85rem; font-weight:600; display:inline-block; border:1px solid transparent; transition:.25s; }
.btn-details:hover, .btn-cart:hover { background:var(--accent); color:#111; }
.actions { display:flex; gap:6px; }

/* Dark mode */
body.dark-mode { background:linear-gradient(180deg,#1a1a1a,#0f0f0f)!important; color:#e0e0e0!important; }
body.dark-mode nav { background:linear-gradient(180deg,rgba(30,30,30,0.95),rgba(20,20,20,0.98))!important; border-bottom:1px solid rgba(255,255,255,0.1)!important; }
body.dark-mode .menu-toggle { background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.2); }
body.dark-mode .menu-toggle span { background:#fff; }
body.dark-mode .nav-links { background:rgba(30,30,30,0.98); box-shadow:-4px 0 24px rgba(0,0,0,0.5); }
body.dark-mode .nav-links a { color:rgba(255,255,255,0.7)!important; }
body.dark-mode .nav-links a:hover { color:#fff!important; background:rgba(255,255,255,0.1); }
body.dark-mode #darkModeToggle { background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.2); color:#fff; }
body.dark-mode .product-card { background:rgba(40,40,40,0.9)!important; border:1px solid rgba(255,255,255,0.1)!important; box-shadow:0 10px 30px rgba(0,0,0,0.5)!important; }
body.dark-mode .product-title { color:#f5f5f5!important; }
body.dark-mode .product-meta { color:#999!important; }
body.dark-mode .product-desc { color:#aaa!important; }
body.dark-mode .btn-details, body.dark-mode .btn-cart { background:#f5f5f5!important; color:#111!important; }
body.dark-mode .btn-details:hover, body.dark-mode .btn-cart:hover { background:var(--accent)!important; color:#111!important; }
body.dark-mode .hero-image::before { background:linear-gradient(90deg,rgba(0,0,0,0.70) 0%,rgba(0,0,0,0.50) 45%,rgba(0,0,0,0.28) 70%,rgba(0,0,0,0.18) 100%); }
</style>
</head>
<body class="products-page">
<nav><div class="logo">PRISM AUDIO</div></nav>
<button class="menu-toggle" id="menuToggle" aria-label="Toggle menu"><span></span><span></span><span></span></button>
<div class="menu-overlay" id="menuOverlay"></div>
<div class="nav-links" id="navMenu">
  <a href="{{ url_for('home') }}">Home</a>
  <a href="{{ url_for('products') }}">Products</a>
  <a href="{{ url_for('turntables') }}">Turntables</a>
  <a href="{{ url_for('speakers') }}">Speakers</a>
  <a href="{{ url_for('amplifiers') }}">Accessories</a>
  <a href="{{ url_for('about') }}">About</a>
  <a href="{{ url_for('cart') }}">Cart ({{ cart_count }})</a>
  <button id="darkModeToggle">☾ Dark Mode</button>
  <div style="flex:1;"></div>
  {% if session.get('user_id') %}
    <a href="{{ url_for('account') }}">My Account</a>
    <a href="{{ url_for('logout') }}">Log out</a>
  {% else %}
    <a href="{{ url_for('login') }}">Log in</a>
    <a href="{{ url_for('signup') }}">Sign up</a>
  {% endif %}
</div>

<section class="hero-container">
  <div class="hero-image">
    <div class="hero-content">
      <h1><span class="accent">Amplify</span> the cheer</h1>
      <p>From audiophiles to adventure‑seekers, find speakers for every listener on your list.</p>
      <a href="#catalog" class="hero-cta">Browse Speakers ↓</a>
    </div>
  </div>
</section>

<main class="page" id="catalog">
  <section class="product-grid">
    {% for p in items %}
    <article class="product-card" id="product-{{ p.id }}">
      <img class="product-media" src="{{ p.image }}" alt="{{ p.name }}">
      <div class="product-body">
        <div class="content">
          <h3 class="product-title">{{ p.name }}</h3>
          <div class="product-meta">{{ p.category }} • {{ p.stock }} in stock</div>
          <p class="product-desc">{{ p.description }}</p>
        </div>
        <div class="product-footer">
          <span class="price">${{ '%.2f'|format(p.price) }}</span>
          <div class="actions">
            <a class="btn-details" href="{{ url_for('product_detail_slug', slug=slugify(p.name)) }}">Details</a>
            {% if p.stock > 0 %}
            <form action="{{ url_for('cart_add') }}" method="post" style="margin:0;">
              <input type="hidden" name="product_id" value="{{ p.id }}">
              <input type="hidden" name="quantity" value="1">
              <button class="btn-cart" type="submit">Add</button>
            </form>
            {% else %}
            <button class="btn-cart" disabled style="opacity:.5;cursor:not-allowed;">Out</button>
            {% endif %}
          </div>
        </div>
      </div>
    </article>
    {% endfor %}
  </section>
</main>

<script>
const menuToggle=document.getElementById('menuToggle');
const navMenu=document.getElementById('navMenu');
const menuOverlay=document.getElementById('menuOverlay');
const toggle=document.getElementById('darkModeToggle');
const body=document.body;
menuToggle.addEventListener('click',()=>{menuToggle.classList.toggle('active');navMenu.classList.toggle('active');menuOverlay.classList.toggle('active');});
menuOverlay.addEventListener('click',()=>{menuToggle.classList.remove('active');navMenu.classList.remove('active');menuOverlay.classList.remove('active');});
navMenu.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>{menuToggle.classList.remove('active');navMenu.classList.remove('active');menuOverlay.classList.remove('active');}));
if(localStorage.getItem('darkMode')==='enabled'){enableDarkMode();}
toggle.addEventListener('click',()=>{body.classList.contains('dark-mode')?disableDarkMode():enableDarkMode();});
function enableDarkMode(){body.classList.add('dark-mode');toggle.textContent='☀ Light Mode';localStorage.setItem('darkMode','enabled');}
function disableDarkMode(){body.classList.remove('dark-mode');toggle.textContent='☾ Dark Mode';localStorage.removeItem('darkMode');}
</script>
</body>
</html>