<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><title>Log in — Prism Audio</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* Copy of index page visual system */
    body.products-page {
      background: linear-gradient(180deg,#faf7f4 0%, #f3efe9 100%);
      color:#1a1a1a;
      font-family: Inter, system-ui,-apple-system,"Segoe UI", Roboto, sans-serif;
    }
    nav {
      background: linear-gradient(180deg,rgba(255,255,255,0.95) 0%,rgba(250,247,244,0.98) 100%);
      border-bottom:1px solid rgba(139,90,65,0.1);
      box-shadow:0 4px 16px rgba(26,26,26,0.04);
      -webkit-backdrop-filter:blur(10px) saturate(120%);
      backdrop-filter:blur(10px) saturate(120%);
      display:flex; justify-content:center; align-items:center;
      padding:1.25rem 3rem; position:fixed; top:0; left:0; right:0; width:100%; z-index:100;
    }
    .logo { color:#ffffff; font-weight:700; letter-spacing:1px; font-size:1.3rem; text-align:center; }
    .menu-toggle {
      position:fixed; top:1.5rem; right:3rem; z-index:1001;
      background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1);
      padding:12px; border-radius:8px; cursor:pointer; transition:.3s;
      display:flex; flex-direction:column; gap:5px; width:40px; height:40px; justify-content:center; align-items:center;
    }
    .menu-toggle span { width:24px; height:2px; background:#111; transition:.3s; border-radius:2px; }
    .menu-toggle.active span:nth-child(1){ transform:rotate(45deg) translate(6px,6px); }
    .menu-toggle.active span:nth-child(2){ opacity:0; }
    .menu-toggle.active span:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px); }
    .nav-links {
      position:fixed; top:0; right:-350px; width:350px; height:100vh;
      background:rgba(255,255,255,0.98); backdrop-filter:blur(20px);
      box-shadow:-4px 0 24px rgba(0,0,0,0.1); z-index:1000; transition:right .4s cubic-bezier(.4,0,.2,1);
      display:flex; flex-direction:column; padding:100px 40px 40px; gap:8px;
    }
    .nav-links.active { right:0; }
    .nav-links a {
      color:rgba(20,20,20,0.7); text-decoration:none; padding:16px 20px;
      border-radius:8px; transition:.3s; font-size:1.1rem; font-weight:500;
    }
    .nav-links a:hover { color:#111; background:rgba(17,17,17,0.05); transform:translateX(-4px); }
    .nav-links a.cta-primary { background:#111; color:#fff; font-weight:600; text-align:center; }
    .nav-links a.cta-ghost { border:1px solid rgba(17,17,17,0.12); text-align:center; }
    #darkModeToggle {
      background:rgba(17,17,17,0.08); border:1px solid rgba(0,0,0,0.1);
      padding:12px 20px; border-radius:8px; cursor:pointer; color:#111; font-weight:600;
      margin-top:20px; transition:.3s; font-size:1.05rem; text-align:left;
    }
    #darkModeToggle:hover { background:rgba(17,17,17,0.12); transform:translateX(-4px); }
    .menu-overlay {
      position:fixed; top:0; left:0; width:100%; height:100vh;
      background:rgba(0,0,0,0); z-index:999; pointer-events:none; transition:background .4s;
    }
    .menu-overlay.active { background:rgba(0,0,0,0.3); pointer-events:all; }

    /* Auth form styling (aligned with card aesthetics) */
    main.container { max-width:1200px; margin:140px auto 80px; padding:0 20px; }
    .auth-wrap { display:flex; justify-content:center; }
    .auth-card {
      width:100%; max-width:520px; background:#fff; border-radius:12px;
      padding:32px 30px; box-shadow:0 10px 30px rgba(20,20,20,0.06);
      border:1px solid rgba(0,0,0,0.06);
    }
    .auth-card h1 {
      font-family:'Playfair Display', serif; font-size:2.1rem;
      margin:0 0 16px; color:#0f0f0f; line-height:1.05;
    }

    /* Make the heading readable in dark mode */
    body.dark-mode .auth-card h1 {
      color:#f5f5f5 !important;
    }

    .auth-card form { display:flex; flex-direction:column; gap:14px; }
    .auth-card input {
      background:#fff; border:1px solid rgba(0,0,0,0.12); border-radius:8px;
      padding:12px; font-size:1rem;
    }
    .btn-primary {
      background:#111; color:#fff; border:0; border-radius:8px;
      padding:12px 16px; font-weight:600; cursor:pointer; font-size:1rem;
    }
    .btn-primary:hover { transform:translateY(-2px); box-shadow:0 6px 14px rgba(0,0,0,0.15); }
    .muted { color:#6b6b6b; font-size:.95rem; }
    .flash {
      background:#fff7f0; border:1px solid rgba(139,90,65,0.25);
      color:#513e33; padding:10px 12px; border-radius:8px; margin-bottom:10px;
      font-size:.9rem;
    }

    /* Dark mode */
    body.dark-mode { background:linear-gradient(180deg,#1a1a1a 0%,#0f0f0f 100%) !important; color:#e0e0e0 !important; }
    body.dark-mode nav { background:linear-gradient(180deg,rgba(30,30,30,0.95) 0%,rgba(20,20,20,0.98) 100%) !important; border-bottom:1px solid rgba(255,255,255,0.1) !important; }
    body.dark-mode .menu-toggle { background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.2); }
    body.dark-mode .menu-toggle span { background:#fff; }
    body.dark-mode .nav-links { background:rgba(30,30,30,0.98); box-shadow:-4px 0 24px rgba(0,0,0,0.5); }
    body.dark-mode .nav-links a { color:rgba(255,255,255,0.7) !important; }
    body.dark-mode .nav-links a:hover { color:#fff !important; background:rgba(255,255,255,0.1); }

    /* FIX: make login button text readable in dark mode */
    body.dark-mode .btn-primary {
      background:#111 !important;
      color:#fff !important;
    }

    /* Optional: make the sidebar Login link readable too */
    body.dark-mode .nav-links a.cta-primary {
      background:rgba(255,255,255,0.12) !important;
      color:#fff !important;
      border:1px solid rgba(255,255,255,0.25);
    }

    body.dark-mode .auth-card { background:rgba(30,30,30,0.8) !important; border:1px solid rgba(255,255,255,0.1) !important; box-shadow:0 10px 30px rgba(0,0,0,0.6); }
    body.dark-mode .auth-card input { background:rgba(40,40,40,0.9); color:#f5f5f5; border:1px solid rgba(255,255,255,0.15); }

    /* Password input + eye icon */
    .input-with-toggle{ position:relative; }
    .pw-input{ width:100%; padding-right:44px; }
    .pw-toggle{
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      width:28px; height:28px; display:grid; place-items:center;
      border:none; background:transparent; cursor:pointer; color:#555;
    }
    .pw-toggle svg{ width:20px; height:20px; stroke:currentColor; }
    .pw-toggle .eye-off{ display:none; }
    .pw-toggle[data-visible="true"] .eye{ display:none; }
    .pw-toggle[data-visible="true"] .eye-off{ display:block; }
    body.dark-mode .pw-toggle{ color:#e8e8e8; }
  </style>
</head>
<body class="products-page">
  <nav><div class="logo">PRISM AUDIO</div></nav>

  <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
    <span></span><span></span><span></span>
  </button>

  <div class="menu-overlay" id="menuOverlay"></div>

  <div class="nav-links" id="navMenu">
    <a href="{{ url_for('home') }}">Home</a>
    <a href="{{ url_for('products') }}">Products</a>
    <a href="{{ url_for('turntables') }}">Turntables</a>
    <a href="{{ url_for('speakers') }}">Speakers</a>
    <a href="{{ url_for('amplifiers') }}">Amplifiers</a>
    <a href="{{ url_for('about') }}">About</a>
    <button id="darkModeToggle">☾ Dark Mode</button>
    <div style="flex:1;"></div>
    {% if session.get('user_id') %}
      <a href="{{ url_for('account') }}">My Account</a>
    {% else %}
      <a href="{{ url_for('login') }}">Log in</a>
    {% endif %}
  </div>

  <main class="container">
    <div class="auth-wrap">
      <div class="auth-card" role="region" aria-label="Log in">
        <h1>Log in</h1>
        {% with msgs = get_flashed_messages(with_categories=true) %}
          {% if msgs %}
            {% for cat,msg in msgs %}<div class="flash">{{ msg }}</div>{% endfor %}
          {% endif %}
        {% endwith %}
        <form method="post" autocomplete="on">
          <div style="display:flex; flex-direction:column; gap:14px;">
            <input name="email" type="email" placeholder="Email" required>
            <div class="input-with-toggle">
              <input id="loginPassword" class="pw-input" name="password" type="password" placeholder="Password" required>
              <button type="button" class="pw-toggle" data-target="loginPassword" aria-label="Show password" aria-pressed="false" data-visible="false">
                <!-- eye -->
                <svg class="eye" viewBox="0 0 24 24" fill="none">
                  <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" stroke-width="2" />
                  <circle cx="12" cy="12" r="3" stroke-width="2"/>
                </svg>
                <!-- eye-off -->
                <svg class="eye-off" viewBox="0 0 24 24" fill="none">
                  <path d="M3 3l18 18" stroke-width="2"/>
                  <path d="M10.6 5.1A10.9 10.9 0 0 1 12 5c7 0 11 7 11 7a19.7 19.7 0 0 1-4.1 4.9M6 6a19.7 19.7 0 0 0-5 6s4 7 11 7c1.3 0 2.6-.2 3.8-.6" stroke-width="2"/>
                  <circle cx="12" cy="12" r="3" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <button class="btn-primary" type="submit">Log in</button>
          </div>
        </form>
        <p class="muted" style="margin-top:12px;">No account? <a href="{{ url_for('signup') }}">Sign up</a></p>
      </div>
    </div>
  </main>

  <script>
    const menuToggle=document.getElementById('menuToggle');
    const navMenu=document.getElementById('navMenu');
    const menuOverlay=document.getElementById('menuOverlay');
    const toggle=document.getElementById('darkModeToggle');
    const body=document.body;

    menuToggle.addEventListener('click',()=> {
      menuToggle.classList.toggle('active');
      navMenu.classList.toggle('active');
      menuOverlay.classList.toggle('active');
    });
    menuOverlay.addEventListener('click',()=> {
      menuToggle.classList.remove('active');
      navMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
    });
    navMenu.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click',()=> {
        menuToggle.classList.remove('active');
        navMenu.classList.remove('active');
        menuOverlay.classList.remove('active');
      });
    });

    const dm=localStorage.getItem('darkMode');
    if(dm==='enabled'){enableDarkMode();}
    toggle.addEventListener('click',()=> {
      if(body.classList.contains('dark-mode')){disableDarkMode()}
      else {enableDarkMode()}
    });
    function enableDarkMode(){
      body.classList.add('dark-mode');
      toggle.innerHTML='☀ Light Mode';
      localStorage.setItem('darkMode','enabled');
    }
    function disableDarkMode(){
      body.classList.remove('dark-mode');
      toggle.innerHTML='☾ Dark Mode';
      localStorage.setItem('darkMode',null);
    }
    document.querySelectorAll('.pw-toggle').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-target');
        const input = document.getElementById(id);
        if(!input) return;
        const visible = input.type === 'text';
        input.type = visible ? 'password' : 'text';
        btn.dataset.visible = String(!visible);
        btn.setAttribute('aria-pressed', String(!visible));
        btn.setAttribute('aria-label', visible ? 'Show password' : 'Hide password');
      });
    });
  </script>
</body>
</html>